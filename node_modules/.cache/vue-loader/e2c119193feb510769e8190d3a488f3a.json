{"remainingRequest":"/Users/akahandao/Desktop/毕业设计/vue-store/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/akahandao/Desktop/毕业设计/vue-store/src/components/MyLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/akahandao/Desktop/毕业设计/vue-store/src/components/MyLogin.vue","mtime":1679381552195},{"path":"/Users/akahandao/Desktop/毕业设计/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/akahandao/Desktop/毕业设计/vue-store/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/akahandao/Desktop/毕业设计/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/akahandao/Desktop/毕业设计/vue-store/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0ICBtZDUgIGZyb20gImpzLW1kNSI7CgoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTXlMb2dpbiIsCiAgZGF0YSgpIHsKICAgIC8vIOeUqOaIt+WQjeeahOagoemqjOaWueazlQogICAgLy8gbGV0IHZhbGlkYXRlTmFtZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgIC8vICAgaWYgKCF2YWx1ZSkgewogICAgLy8gICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeeUqOaIt+WQjSIpKTsKICAgIC8vICAgfQogICAgLy8gICAvLyDnlKjmiLflkI3ku6XlrZfmr43lvIDlpLQs6ZW/5bqm5ZyoNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8KICAgIC8vICAgY29uc3QgdXNlck5hbWVSdWxlID0gL15bYS16QS1aXVthLXpBLVowLTlfXXs0LDE1fSQvOwogICAgLy8gICBpZiAodXNlck5hbWVSdWxlLnRlc3QodmFsdWUpKSB7CiAgICAvLyAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgIC8vICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLlrZfmr43lvIDlpLQs6ZW/5bqmNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8iKSk7CiAgICAvLyAgIH0KICAgIC8vIH07CgogICAgLy8g6aqM6K+B5omL5py65Y+3CiAgICBsZXQgY2hlY2tQaG9uZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgY29uc3QgcGhvbmVSZWcgPSAvXjFbMy05XVxkezl9JC8KICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeaJi+acuuWPt+eggScpKQogICAgICB9CiAgICAgIGlmIChwaG9uZVJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKCkKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeato+ehrueahOaJi+acuuWPt+eggScpKQogICAgICB9CiAgICB9CgogICAgLy8g5a+G56CB55qE5qCh6aqM5pa55rOVCiAgICBsZXQgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5a+G56CBIikpOwogICAgICB9CiAgICAgIC8vIOWvhueggeS7peWtl+avjeW8gOWktCzplb/luqblnKg2LTE45LmL6Ze0LOWFgeiuuOWtl+avjeaVsOWtl+WSjOS4i+WIkue6vwogICAgICBjb25zdCBwYXNzd29yZFJ1bGUgPSAvXlthLXpBLVpdXHd7NSwxN30kLzsKICAgICAgaWYgKHBhc3N3b3JkUnVsZS50ZXN0KHZhbHVlKSkgewogICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKAogICAgICAgICAgbmV3IEVycm9yKCLlrZfmr43lvIDlpLQs6ZW/5bqmNi0xOOS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZflkozkuIvliJLnur8iKQogICAgICAgICk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBMb2dpblVzZXI6IHsKICAgICAgICBtb2JpbGU6ICIiLAogICAgICAgIHBhc3M6ICIiCiAgICAgIH0sCiAgICAgIC8vIOeUqOaIt+S/oeaBr+agoemqjOinhOWImSx2YWxpZGF0b3Io5qCh6aqM5pa55rOVKSx0cmlnZ2VyKOinpuWPkeaWueW8jyksYmx1cuS4uuWcqOe7hOS7tiBJbnB1dCDlpLHljrvnhKbngrnml7bop6blj5EKICAgICAgcnVsZXM6IHsKICAgICAgICBtb2JpbGU6IFt7IHZhbGlkYXRvcjogY2hlY2tQaG9uZSwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHBhc3M6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLCB0cmlnZ2VyOiAiYmx1ciIgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5Z2dWV45Lit55qEc2hvd0xvZ2lu77yM5o6n5Yi255m75b2V57uE5Lu25piv5ZCm5pi+56S6CiAgICBpc0xvZ2luOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTaG93TG9naW47CiAgICAgIH0sCiAgICAgIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgICAgdGhpcy5zZXRTaG93TG9naW4odmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInNldFVzZXIiLCAic2V0U2hvd0xvZ2luIl0pLAogICAgdGVzdCgpewogICAgICB0aGlzLiRheGlvcwogICAgICAuZ2V0KCIvYXBpL2RlbW8vaGVsbG8iKS50aGVuKHJlcyA9PnsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIH0pLmNhdGNoKGVyciA9PnsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKQogICAgICB9KQoKICAgIH0sCiAgICBMb2dpbigpIHsKICAgICAgLy8g6YCa6L+HZWxlbWVudOiHquWumuS5ieihqOWNleagoemqjOinhOWIme+8jOagoemqjOeUqOaIt+i+k+WFpeeahOeUqOaIt+S/oeaBrwogICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICAvL+WmguaenOmAmui/h+agoemqjOW8gOWni+eZu+W9lQogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHNhbHQgPSAiMWEyYjNjNGQiOwogICAgICAgICAgdmFyIHN0ciA9ICIiICsgc2FsdC5jaGFyQXQoMCkgKyBzYWx0LmNoYXJBdCgyKSArIHRoaXMuTG9naW5Vc2VyLnBhc3MgKyBzYWx0LmNoYXJBdCg1KSArIHNhbHQuY2hhckF0KDQpOwogICAgICAgICAgdGhpcy5Mb2dpblVzZXIucGFzcyA9IG1kNShzYWx0ICsgc3RyKTsKICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoIi9hcGkvbG9naW4vZG9Mb2dpbiIsIHsKICAgICAgICAgICAgICBtb2JpbGU6IHRoaXMuTG9naW5Vc2VyLm1vYmlsZSwKICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5Mb2dpblVzZXIucGFzcwogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZSA9PT0gMjAwKXsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zZXRVc2VyKHJlcy5kYXRhLm9iaik7CiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2NlZWQoIuasoui/jueZu+W9lToiK3Jlcy5kYXRhLm9iai5uaWNrbmFtZSk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8g4oCcMDAx4oCd5Luj6KGo55m75b2V5oiQ5Yqf77yM5YW25LuW55qE5Z2H5Li65aSx6LSlCiAgICAgICAgICAgICAgLy8gaWYgKHJlcy5kYXRhLmNvZGUgPT09ICIwMDEiKSB7CiAgICAgICAgICAgICAgLy8gICAvLyDpmpDol4/nmbvlvZXnu4Tku7YKICAgICAgICAgICAgICAvLyAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgICAgICAgIC8vICAgLy8g55m75b2V5L+h5oGv5a2Y5Yiw5pys5ZywCiAgICAgICAgICAgICAgLy8gICBsZXQgdXNlciA9IEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCB1c2VyKTsKICAgICAgICAgICAgICAvLyAgIC8vIOeZu+W9leS/oeaBr+WtmOWIsHZ1ZXgKICAgICAgICAgICAgICAvLyAgIHRoaXMuc2V0VXNlcihyZXMuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAvLyAgIC8vIOW8ueWHuumAmuefpeahhuaPkOekuueZu+W9leaIkOWKn+S/oeaBrwogICAgICAgICAgICAgIC8vICAgdGhpcy5ub3RpZnlTdWNjZWVkKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgICAvLyAgIC8vIOa4heepuui+k+WFpeahhueahOagoemqjOeKtuaAgQogICAgICAgICAgICAgIC8vICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgIC8vICAgLy8g5by55Ye66YCa55+l5qGG5o+Q56S655m75b2V5aSx6LSl5L+h5oGvCiAgICAgICAgICAgICAgLy8gICB0aGlzLm5vdGlmeUVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpCiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuY29kZSkKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLmNvZGUpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["MyLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyLogin.vue","sourceRoot":"src/components","sourcesContent":["<!--\n * @Description: 登录组件\n * @Author: hai-27\n * @Date: 2020-02-19 20:55:17\n * @LastEditors: hai-27\n * @LastEditTime: 2020-03-01 15:34:08\n -->\n<template>\n  <div id=\"myLogin\">\n    <el-dialog title=\"登录\" width=\"300px\" center :visible.sync=\"isLogin\">\n      <el-form :model=\"LoginUser\" :rules=\"rules\" status-icon ref=\"ruleForm\" class=\"demo-ruleForm\">\n        <el-form-item prop=\"name\">\n          <el-input prefix-icon=\"el-icon-user-solid\" placeholder=\"请输入账号\" v-model=\"LoginUser.mobile\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"pass\">\n          <el-input\n            prefix-icon=\"el-icon-view\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            v-model=\"LoginUser.pass\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"medium\" type=\"primary\" @click=\"Login\" style=\"width:100%;\">登录</el-button>\n          <el-button size=\"medium\" type=\"primary\" @click=\"test\" style=\"width:100%;\">ceshi</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { mapActions } from \"vuex\";\nimport  md5  from \"js-md5\";\n\n\n\nexport default {\n  name: \"MyLogin\",\n  data() {\n    // 用户名的校验方法\n    // let validateName = (rule, value, callback) => {\n    //   if (!value) {\n    //     return callback(new Error(\"请输入用户名\"));\n    //   }\n    //   // 用户名以字母开头,长度在5-16之间,允许字母数字下划线\n    //   const userNameRule = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;\n    //   if (userNameRule.test(value)) {\n    //     this.$refs.ruleForm.validateField(\"checkPass\");\n    //     return callback();\n    //   } else {\n    //     return callback(new Error(\"字母开头,长度5-16之间,允许字母数字下划线\"));\n    //   }\n    // };\n\n    // 验证手机号\n    let checkPhone = (rule, value, callback) => {\n      const phoneReg = /^1[3-9]\\d{9}$/\n      if (!value) {\n        return callback(new Error('请输入手机号码'))\n      }\n      if (phoneReg.test(value)) {\n        callback()\n      } else {\n        callback(new Error('请输入正确的手机号码'))\n      }\n    }\n\n    // 密码的校验方法\n    let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        return callback(new Error(\"请输入密码\"));\n      }\n      // 密码以字母开头,长度在6-18之间,允许字母数字和下划线\n      const passwordRule = /^[a-zA-Z]\\w{5,17}$/;\n      if (passwordRule.test(value)) {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n        return callback();\n      } else {\n        return callback(\n          new Error(\"字母开头,长度6-18之间,允许字母数字和下划线\")\n        );\n      }\n    };\n    return {\n      LoginUser: {\n        mobile: \"\",\n        pass: \"\"\n      },\n      // 用户信息校验规则,validator(校验方法),trigger(触发方式),blur为在组件 Input 失去焦点时触发\n      rules: {\n        mobile: [{ validator: checkPhone, trigger: \"blur\" }],\n        pass: [{ validator: validatePass, trigger: \"blur\" }]\n      }\n    };\n  },\n  computed: {\n    // 获取vuex中的showLogin，控制登录组件是否显示\n    isLogin: {\n      get() {\n        return this.$store.getters.getShowLogin;\n      },\n      set(val) {\n        this.$refs[\"ruleForm\"].resetFields();\n        this.setShowLogin(val);\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\"setUser\", \"setShowLogin\"]),\n    test(){\n      this.$axios\n      .get(\"/api/demo/hello\").then(res =>{\n        console.log(res.data);\n      }).catch(err =>{\n        return Promise.reject(err)\n      })\n\n    },\n    Login() {\n      // 通过element自定义表单校验规则，校验用户输入的用户信息\n      this.$refs[\"ruleForm\"].validate(valid => {\n        //如果通过校验开始登录\n        if (valid) {\n          let salt = \"1a2b3c4d\";\n          var str = \"\" + salt.charAt(0) + salt.charAt(2) + this.LoginUser.pass + salt.charAt(5) + salt.charAt(4);\n          this.LoginUser.pass = md5(salt + str);\n          this.$axios.post(\"/api/login/doLogin\", {\n              mobile: this.LoginUser.mobile,\n              password: this.LoginUser.pass\n            }).then(res => {\n              if(res.data.code === 200){\n                this.isLogin = false;\n                this.setUser(res.data.obj);\n                this.notifySucceed(\"欢迎登录:\"+res.data.obj.nickname);\n              }else{\n                this.$refs[\"ruleForm\"].resetFields();\n                this.notifyError(res.data.msg)\n              }\n              // “001”代表登录成功，其他的均为失败\n              // if (res.data.code === \"001\") {\n              //   // 隐藏登录组件\n              //   this.isLogin = false;\n              //   // 登录信息存到本地\n              //   let user = JSON.stringify(res.data.user);\n              //   localStorage.setItem(\"user\", user);\n              //   // 登录信息存到vuex\n              //   this.setUser(res.data.user);\n              //   // 弹出通知框提示登录成功信息\n              //   this.notifySucceed(res.data.msg);\n              // } else {\n              //   // 清空输入框的校验状态\n              //   this.$refs[\"ruleForm\"].resetFields();\n              //   // 弹出通知框提示登录失败信息\n              //   this.notifyError(res.data.msg);\n              // }\n              console.log(res.data)\n              console.log(res.data.data)\n              console.log(res.data.code)\n              console.log(res.data.data.code)\n            })\n            .catch(err => {\n              return Promise.reject(err);\n            });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n<style>\n</style>"]}]}